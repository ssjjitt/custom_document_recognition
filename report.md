## 21.10.2025
начала разработку сервиса для распознавания документов.  
основная идея — возможность загружать изображение документа, распознавать текст с помощью tesseract.js, а затем анализировать содержимое текста через LLM (локально с ollama).  
сначала продумала архитектуру — планируется модульная структура: `ocr.service`, `llm.service`, `routes/recognize`, `uploads`.  
frontend пока отложен, сосредоточилась на backend-части.

## 22.10.2025
подготовила базовую структуру проекта на node + typescript.  
настроила tsconfig и esm-модули (возникали ошибки с `__dirname` и import/export, решила через `import.meta.url`).  
создала роут `/recognize` с обработкой загрузки файла через multer.  
на этом этапе сервер уже принимает файл и сохраняет его в `uploads/`.  

пример кода для загрузки:

router.post('/recognize', upload.single('file'), async (req, res) => {
  const result = await runOCR(req.file.path);
  res.json(result);
});

## 23.10.2025
реализовала обработку документов через локальный LLM.
задача заключалась в том, чтобы после распознавания текста с помощью Tesseract.js извлекать конкретные поля из документа. подготовила промпт для модели, чтобы она отвечала только в формате JSON. добавила обработку ошибок при парсинге ответа модели, чтобы сервер не падал, если LLM вернёт некорректный текст. проверила, что все данные логируются в logs.json вместе с информацией о времени и исходном файле.

пример кода промпта для LLM:

const prompt = `
Ты — интеллектуальная система распознавания документов на русском языке.

Твоя задача: извлечь из текста значения для следующих полей: ${fields.join(', ')}.

Ответь строго в формате JSON, без каких-либо пояснений, только JSON:
{
  "город": {"value": "Москва", "confidence": 0.95},
  "дата": {"value": "2025-10-22", "confidence": 0.88},
  "время": {"value": "13:47", "confidence": 0.9},
  "цена": {"value": "1200", "confidence": 0.92},
  "имя клиента": {"value": "Иван Иванов", "confidence": 0.85}
}

Вот текст документа:
${text}
`;

## 24.10.2025
начало работы с фронтом и валидацией, добавлены компоненты для загрузки файлов, просмотра документа, формы пользователя, просмотра результата. немного переработан сервер. возникли ошибки в коде, которые в дальнейшем будут исправлены.

## 27.10.2025
добавлен фронт без стилей, проверка работы с файлами с фронта, ошибочно обрабатывается pdf файл, а также при вводе лишних полей не виден результат, будет исправлено в дальнейшем.

## 28.10.2025
добавлены стили, используется tailwind, исправлены ошибка с отображением документа на странице, исправлена ошибка с форматом данных, который приходит в ответ пользователю(не читались поля с фронта на бэк). при вводе пользователем лишних полей, которые не были распознаны OCR/обработаны LLM больше не выдает ошибку. 

## 29.10.2025
рассмотрение вариантов, в каком виде будет присылаться ответ пользователю и где он будет отображаться. 

## 30.10.2025
разработка формы для вывода ответов пользователю. результат теперь выдается в форме, а не в JSON-массиве

## 31.10.2025
подправлены стили формы ответа пользователю, добавлено всплывающее окно, которое показывает пользователю об обработке файла. 

## 03.11.2025
изучение реализаций обработки pdf-документов

## 04.11.2025
добавлена обработка ошибок в log.service.ts. ResultViewer теперь показывает поля в виде подписанных полей ввода с возможностью редактировани. на сервере добавлена логика предварительной конвертации pdf в png при загрузке, чтобы tesseract обрабатывал растр. 

## 05.11.2025
изучение пакетов для работы с pdf-файлами.

## 06.11.2025
добавлено описание для конструктора формы. LLM теперь дает предположительный ответ, если не находит точный. добавлена поддержка pdf-документов(poppler). использован новый инструмент - trae

## 07.11.2025
вместо записи логов в json-файл реализовано сохранение логов в базу данных(mongodb). проверка корректной работы с базой данных.
изучение информации о том как можно дообучить локальную модель.

## 10.11.2025
начало работы над полигонами на словах в документе

## 11.11.2025-14.11.2025
работа с полигонами на словах в доменте

## 17.11.2025
полигоны работают, но криво размещаются на словах. проведено тестирование уже имеющихся частей приложения.  

## 18.11.2025-20.11.2025
поиск и просмотр информации о том, как реализовать полигоны лучше и точнее

## 21.11.2025
Добавлена проверка MIME-типов. Добавлена явная обработка jpg/jpeg: файлы возвращаются без конвертации.

## 24.11.2025
добавлена возможность просмотра обработанных документов(история), удаление записей из истории, загрузка записи из истории и её отображение, автообновление после обработки документа

## 25.11.2025
теперь можно создавать профили для разных типов документов и быстро переключаться между ними, что ускоряет работу с однотипными документами

## 26.11.2025-28.11.2025
проведено тестирование системы на различных типах документов (квитанции, паспорта, договоры). добавлена поддержка дополнительных языков для OCR (английский и русский уже были, теперь добавлена возможность выбора языка распознавания). оптимизирована производительность — уменьшено время обработки документов за счет кэширования результатов OCR для одинаковых файлов.

## 01.12.2025
рассматриваю как сделать автоматизированные процессы в формах приложения

## 02.12.2025
заменены эмодзи на SVG в едином стиле для конструктора форм, документ, шаблонов полей, загрузки, информации

## 03.12.2025
обновлены стили компонентов, улучшены кнопки с цветными фонами и hover-эффектами, дообавлены плавные переходы и анимации.

## 04.12.2025
теперь есть два режима: ручной и автоматический. в ручном поля и прочее задает сам пользователь, в автоматическом этим процессом занимается ИИ, пользователь только загружает документ. LLM теперь используется в более широком спектре: для анализа документа и предложения релевантных полей

## 05.12.2025
улучшен OCR, теперь есть предобработка изображений, то есть градация серого, нормализация, резкость, медианная фильтрация. 

## 08.12.2025
добавлены всплывающие подсказки, которые генерирует LLM. улучшено отображение текста с полигонами, теперь полигоны находятся не на документе, а на распознанных словах, чтобы пользователь сразу видел результат распознавания и мог назначить правильно распознанное поле, которое ему нужно. превью файла теперь открывается в окне увеличенного просмотра при нажатии на соответствующую кнопку для более компактного отображения.

## 09.12.2025
добавлена обработка многостраничных файлов, добавлена пагинация в превью файла и в модальном окне, исправлено отображение полигонов на распознанном тексте, исправлена читаемость текста.